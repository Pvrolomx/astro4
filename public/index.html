<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <title>ASTRO4 - Tu Gu√≠a C√≥smica</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Nunito:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#c9a96e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Nunito', sans-serif;
      background: linear-gradient(180deg, #faf7f2 0%, #f5ede3 100%);
      min-height: 100vh;
      color: #3d3527;
    }
    .container { max-width: 420px; margin: 0 auto; padding: 16px; }
    
    /* Language Toggle */
    .lang-toggle {
      position: absolute; top: 16px; right: 16px;
      display: flex; gap: 4px; background: rgba(255,255,255,0.8);
      border-radius: 20px; padding: 4px;
    }
    .lang-btn {
      padding: 6px 12px; border: none; border-radius: 16px;
      font-size: 0.8rem; font-weight: 600; cursor: pointer;
      background: transparent; color: #8b7d6b;
      transition: all 0.2s;
    }
    .lang-btn.active { background: #c9a96e; color: white; }
    
    /* Install Banner */
    .install-banner {
      background: linear-gradient(135deg, #c9a96e 0%, #8b7355 100%);
      color: white; padding: 12px 16px; border-radius: 12px;
      margin-bottom: 16px; display: flex; align-items: center;
      justify-content: space-between;
      box-shadow: 0 4px 15px rgba(139, 115, 85, 0.3);
    }
    .install-banner p { font-size: 14px; }
    .install-banner button {
      background: white; color: #8b7355; border: none;
      padding: 8px 16px; border-radius: 20px; font-weight: 600; cursor: pointer;
    }
    
    /* Header */
    header { text-align: center; padding: 16px 0 24px; position: relative; }
    header h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.2rem; font-weight: 500; color: #5c4d3c; letter-spacing: 3px;
    }
    header .subtitle { font-size: 0.85rem; color: #8b7d6b; margin-top: 4px; letter-spacing: 2px; }
    
    /* Main Card */
    .main-card {
      background: white; border-radius: 24px; padding: 24px 20px;
      box-shadow: 0 8px 30px rgba(93, 77, 60, 0.1); margin-bottom: 20px;
    }
    .main-card h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.4rem; color: #5c4d3c; margin-bottom: 6px;
    }
    .main-card p { color: #8b7d6b; font-size: 0.9rem; margin-bottom: 20px; }
    
    /* Form */
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; font-size: 0.85rem; color: #5c4d3c; margin-bottom: 6px; font-weight: 500; }
    .form-group input, .form-group select {
      width: 100%; padding: 12px 14px; border: 1px solid #e5ddd3;
      border-radius: 12px; font-size: 16px; background: #faf7f2;
      color: #3d3527; font-family: 'Nunito', sans-serif;
    }
    .form-group input:focus, .form-group select:focus {
      outline: none; border-color: #c9a96e;
      box-shadow: 0 0 0 3px rgba(201, 169, 110, 0.1);
    }
    .date-row { display: flex; gap: 8px; }
    .date-row select { flex: 1; }
    
    .btn-primary {
      width: 100%; padding: 14px;
      background: linear-gradient(135deg, #c9a96e 0%, #a68b5b 100%);
      color: white; border: none; border-radius: 12px;
      font-size: 1rem; font-weight: 600; cursor: pointer;
      box-shadow: 0 4px 15px rgba(166, 139, 91, 0.3);
      transition: transform 0.2s;
    }
    .btn-primary:active { transform: scale(0.98); }
    
    /* Traditions Grid */
    .traditions-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 24px; }
    .tradition-card {
      background: white; border-radius: 20px; padding: 16px 12px;
      text-align: center; box-shadow: 0 4px 20px rgba(93, 77, 60, 0.08);
    }
    .tradition-card img { width: 70px; height: 70px; border-radius: 14px; margin-bottom: 10px; object-fit: cover; }
    .tradition-card h3 { font-size: 0.9rem; color: #5c4d3c; font-weight: 600; margin-bottom: 2px; }
    .tradition-card span { font-size: 0.7rem; color: #a99d8d; }
    
    /* Footer */
    footer { text-align: center; padding: 16px; color: #a99d8d; font-size: 0.8rem; }
    footer a { color: #c9a96e; text-decoration: none; }
  </style>
</head>
<body>
  <div class="container">
    <!-- Language Toggle -->
    <div class="lang-toggle">
      <button class="lang-btn active" onclick="setLang('es')" id="btn-es">ES</button>
      <button class="lang-btn" onclick="setLang('en')" id="btn-en">EN</button>
    </div>
    
    <div class="install-banner" id="installBanner">
      <p data-i18n="install">üì≤ Instala ASTRO4</p>
      <button onclick="installApp()" data-i18n="installBtn">Instalar</button>
    </div>
    
    <header>
      <h1>‚úß ASTRO4 ‚úß</h1>
      <p class="subtitle" data-i18n="subtitle">Tu Gu√≠a C√≥smica Personal</p>
    </header>
    
    <div class="main-card">
      <h2 data-i18n="discover">Descubre tu energ√≠a de hoy</h2>
      <p data-i18n="traditions">4 tradiciones ancestrales te gu√≠an.</p>
      
      <form id="onboarding-form">
        <div class="form-group">
          <label data-i18n="nameLabel">Tu nombre</label>
          <input type="text" id="nombre" data-i18n-placeholder="namePlaceholder" placeholder="¬øC√≥mo te llamas?" required>
        </div>
        
        <div class="form-group">
          <label data-i18n="birthLabel">Fecha de nacimiento</label>
          <div class="date-row">
            <select id="dia" required>
              <option value="" data-i18n="day">D√≠a</option>
            </select>
            <select id="mes" required>
              <option value="" data-i18n="month">Mes</option>
            </select>
            <select id="anio" required>
              <option value="" data-i18n="year">A√±o</option>
            </select>
          </div>
        </div>
        
        <button type="submit" class="btn-primary" data-i18n="revealBtn">‚ú® Revelar mi energ√≠a</button>
      </form>
    </div>
    
    <div class="traditions-grid">
      <div class="tradition-card">
        <img src="Sol.jpeg" alt="Occidental">
        <h3 data-i18n="western">Occidental</h3>
        <span data-i18n="westernSub">Zodiaco solar</span>
      </div>
      <div class="tradition-card">
        <img src="Luna.jpeg" alt="V√©dico">
        <h3 data-i18n="vedic">V√©dico</h3>
        <span data-i18n="vedicSub">Nakshatra lunar</span>
      </div>
      <div class="tradition-card">
        <img src="Dragon.jpeg" alt="Chino">
        <h3 data-i18n="chinese">Chino</h3>
        <span data-i18n="chineseSub">Animal y elemento</span>
      </div>
      <div class="tradition-card">
        <img src="Numeros.jpeg" alt="Numerolog√≠a">
        <h3 data-i18n="numerology">Numerolog√≠a</h3>
        <span data-i18n="numerologySub">N√∫meros de vida</span>
      </div>
    </div>
    
    <footer>
      <p>üêù <span data-i18n="madeWith">Hecho con ‚ô• por</span> <a href="#">Colmena (C6)</a></p>
      <p><a href="#" onclick="showPrivacy()" data-i18n="privacy">Privacidad</a></p>
    </footer>
  </div>
  
  <script>
    // Translations
    const i18n = {
      es: {
        install: "üì≤ Instala ASTRO4",
        installBtn: "Instalar",
        subtitle: "Tu Gu√≠a C√≥smica Personal",
        discover: "Descubre tu energ√≠a de hoy",
        traditions: "4 tradiciones ancestrales te gu√≠an.",
        nameLabel: "Tu nombre",
        namePlaceholder: "¬øC√≥mo te llamas?",
        birthLabel: "Fecha de nacimiento",
        day: "D√≠a", month: "Mes", year: "A√±o",
        revealBtn: "‚ú® Revelar mi energ√≠a",
        western: "Occidental", westernSub: "Zodiaco solar",
        vedic: "V√©dico", vedicSub: "Nakshatra lunar",
        chinese: "Chino", chineseSub: "Animal y elemento",
        numerology: "Numerolog√≠a", numerologySub: "N√∫meros de vida",
        madeWith: "Hecho con ‚ô• por",
        privacy: "Privacidad",
        privacyMsg: "ASTRO4 respeta tu privacidad. Tus datos se guardan solo en tu dispositivo.",
        months: ["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"]
      },
      en: {
        install: "üì≤ Install ASTRO4",
        installBtn: "Install",
        subtitle: "Your Personal Cosmic Guide",
        discover: "Discover your energy today",
        traditions: "4 ancestral traditions guide you.",
        nameLabel: "Your name",
        namePlaceholder: "What's your name?",
        birthLabel: "Date of birth",
        day: "Day", month: "Month", year: "Year",
        revealBtn: "‚ú® Reveal my energy",
        western: "Western", westernSub: "Solar zodiac",
        vedic: "Vedic", vedicSub: "Lunar nakshatra",
        chinese: "Chinese", chineseSub: "Animal & element",
        numerology: "Numerology", numerologySub: "Life numbers",
        madeWith: "Made with ‚ô• by",
        privacy: "Privacy",
        privacyMsg: "ASTRO4 respects your privacy. Your data is stored only on your device.",
        months: ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
      }
    };
    
    let currentLang = localStorage.getItem('astro4_lang') || 'es';
    
    function setLang(lang) {
      currentLang = lang;
      localStorage.setItem('astro4_lang', lang);
      document.documentElement.lang = lang;
      
      // Update buttons
      document.getElementById('btn-es').classList.toggle('active', lang === 'es');
      document.getElementById('btn-en').classList.toggle('active', lang === 'en');
      
      // Update all text
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (i18n[lang][key]) el.textContent = i18n[lang][key];
      });
      
      // Update placeholders
      document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (i18n[lang][key]) el.placeholder = i18n[lang][key];
      });
      
      // Update month options
      updateMonths();
    }
    
    function updateMonths() {
      const mesSelect = document.getElementById('mes');
      const months = i18n[currentLang].months;
      mesSelect.innerHTML = '<option value="" data-i18n="month">' + i18n[currentLang].month + '</option>';
      months.forEach((m, idx) => {
        mesSelect.innerHTML += '<option value="' + (idx+1) + '">' + m + '</option>';
      });
    }
    
    function showPrivacy() {
      alert(i18n[currentLang].privacyMsg);
    }
    
    // Initialize
    function initPage() {
      // Populate days
      const diaSelect = document.getElementById('dia');
      for(let i=1; i<=31; i++) {
        diaSelect.innerHTML += '<option value="'+i+'">'+i+'</option>';
      }
      
      // Populate years
      const anioSelect = document.getElementById('anio');
      for(let i=2010; i>=1920; i--) {
        anioSelect.innerHTML += '<option value="'+i+'">'+i+'</option>';
      }
      
      // Set language
      setLang(currentLang);
    }
    
    initPage();
    
    // PWA Install
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });
    
    function installApp() {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((result) => {
          if (result.outcome === 'accepted') {
            document.getElementById('installBanner').style.display = 'none';
          }
          deferredPrompt = null;
        });
      } else {
        const msg = currentLang === 'es' 
          ? 'Para instalar:\n1. Toca el men√∫ ‚ãÆ\n2. Selecciona "A√±adir a pantalla de inicio"'
          : 'To install:\n1. Tap menu ‚ãÆ\n2. Select "Add to Home Screen"';
        alert(msg);
      }
    }
    
    if (window.matchMedia('(display-mode: standalone)').matches) {
      document.getElementById('installBanner').style.display = 'none';
    }
    
    // Form submit
    document.getElementById('onboarding-form').addEventListener('submit', function(e) {
      e.preventDefault();
      var nombre = document.getElementById('nombre').value;
      var dia = document.getElementById('dia').value;
      var mes = document.getElementById('mes').value;
      var anio = document.getElementById('anio').value;
      if(mes.length === 1) mes = '0' + mes;
      if(dia.length === 1) dia = '0' + dia;
      var fecha = anio + '-' + mes + '-' + dia;
      window.location.href = 'app.html?nombre=' + encodeURIComponent(nombre) + '&fecha=' + fecha + '&lang=' + currentLang;
    });
  </script>
</body>
</html>